<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>힙합 가사 텍스트 마이닝 및 워드 클라우드 - My New Hugo Site</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="My New Hugo Site" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">My New Hugo Site</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">힙합 가사 텍스트 마이닝 및 워드 클라우드</h1>
			
		</header><div class="content post__content clearfix">
			<p>KoNLP 패키지 설치하기
현재 KoNLP 패키지가 CRAN에서 삭제된 상태라 install.packages()를 이용해 설치할 수 없습니다.
아래 코드를 순서대로 실행하면 깃헙 버전 KoNLP 패키지를 설치할 수 있습니다.</p>
<ol>
<li>
<p>java와 rJava 설치
install.packages(&ldquo;multilinguer&rdquo;)
library(multilinguer)
install_jdk()</p>
</li>
<li>
<p>KoNLP 의존성 패키지 설치
install.packages(c(&ldquo;stringr&rdquo;, &ldquo;hash&rdquo;, &ldquo;tau&rdquo;, &ldquo;Sejong&rdquo;, &ldquo;RSQLite&rdquo;, &ldquo;devtools&rdquo;), type = &ldquo;binary&rdquo;)</p>
</li>
<li>
<p>깃헙 버전 KoNLP 설치
install.packages(&ldquo;remotes&rdquo;)
remotes::install_github(&ldquo;haven-jeon/KoNLP&rdquo;, upgrade = &ldquo;never&rdquo;, INSTALL_opts=c(&quot;&ndash;no-multiarch&quot;))</p>
</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#75715e"># 힙합 가사 텍스트 마이닝</span>

<span style="color:#75715e"># 문자로 된 데이터에서 가치 있는 정보를 얻어 내는 분석 기법을</span>
<span style="color:#75715e"># &#39;텍스트 마이닝&#39;이라고 한다.</span>
<span style="color:#75715e"># 텍스트 마이닝을 할 때 가장 먼저 하는 작업은 문장을 구성하는 어절</span>
<span style="color:#75715e"># 들이 어떤 품사로 되어 있는지 파악하는 &#39;형태소 분석&#39;이다.</span>


<span style="color:#75715e"># 한글 자연어 분석 패키지인 KoNLP(Korean Natural Language Processing)</span>
<span style="color:#75715e"># 을 통해 한글 데어터로 형태소 분석을 할 수 있다.</span>
<span style="color:#a6e22e">library</span>(KoNLP)
<span style="color:#a6e22e">library</span>(dplyr)


<span style="color:#75715e"># 사전 설정하기</span>
<span style="color:#75715e"># KoNLP에서 지원하는 NIA 사전은 98만여 개의 단어로 구성</span>
<span style="color:#a6e22e">useNIADic</span>()


<span style="color:#75715e"># hiphop.txt는 멜론 차트 랩/힙합 부문 2017년 3월 둘째 주</span>
<span style="color:#75715e"># 50위 곡들의 가사로 구성되어 있습니다.</span>

txt <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">readLines</span>(<span style="color:#e6db74">&#34;C:/Users/w/Desktop/Data/hiphop.txt&#34;</span>)
<span style="color:#a6e22e">head</span>(txt)

<span style="color:#a6e22e">library</span>(stringr)

<span style="color:#75715e"># * 참고 : str_replace_all()에 사용된 기호 \\W는 특수문자를 의미하는 &#39;정규 표현식&#39;입니다.</span>
<span style="color:#75715e"># 정규 표현식을 이용하면 문장의 내용 중 이메일 주소, 전화 번호처럼 특정한 규칙으로 되어 있는</span>
<span style="color:#75715e"># 부분을 추출할 수 있습니다.</span>
txt <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">str_replace_all</span>(txt, <span style="color:#e6db74">&#34;\\W&#34;</span>, <span style="color:#e6db74">&#34; &#34;</span>)

<span style="color:#75715e"># 명사 추출하기</span>
<span style="color:#75715e"># * 참고 : extractNoun()은 출력 결과를 리스트 형태로 반환합니다.</span>
<span style="color:#75715e"># table(unlist(nouns))는 리스트로 되어 있는 nouns를 빈도 테이블로</span>
<span style="color:#75715e"># 변환하는 기능을 합니다.</span>
<span style="color:#a6e22e">extractNoun</span>(<span style="color:#e6db74">&#34;대한민국의 영토는 한반도와 그 부속도서로 한다&#34;</span>)

<span style="color:#75715e"># 가사에서 명사 추출</span>
nouns <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">extractNoun</span>(txt)

<span style="color:#75715e"># 추출한 명사 list를 문자열 벡터로 변환, 단어별 빈도표 생성</span>
wordcount <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">table</span>(<span style="color:#a6e22e">unlist</span>(nouns))

<span style="color:#75715e"># 데이터 프레임으로 변환</span>
df_word <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.data.frame</span>(wordcount, stringsAsFactors <span style="color:#f92672">=</span> F)

<span style="color:#75715e"># 변수명 수정</span>
df_word <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">rename</span>(df_word, word <span style="color:#f92672">=</span> Var1, freq <span style="color:#f92672">=</span> Freq)

<span style="color:#75715e"># 자주 사용된 단어 빈도표 만들기</span>
<span style="color:#75715e"># nchar()를 이용해 두 글자 이상으로 된 단어만 추출</span>
df_word <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">filter</span>(df_word, <span style="color:#a6e22e">nchar</span>(word) <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">2</span>)

<span style="color:#75715e"># 상위 20개 단어를 추출한다.</span>
top_20 <span style="color:#f92672">&lt;-</span> df_word <span style="color:#f92672">%&gt;%</span>
  <span style="color:#a6e22e">arrange</span>(<span style="color:#a6e22e">desc</span>(freq)) <span style="color:#f92672">%&gt;%</span>
  <span style="color:#a6e22e">head</span>(<span style="color:#ae81ff">20</span>)

top_20

<span style="color:#75715e"># wordcloud 패키지를 이용하면 워드 클라우드를 만들 수 있다.</span>
<span style="color:#a6e22e">install.packages</span>(<span style="color:#e6db74">&#34;wordcloud&#34;</span>)

<span style="color:#a6e22e">library</span>(wordcloud)

<span style="color:#75715e"># wordcloud 패키지를 설치하고 로드한 후 글자 색깔을 표현하는데 사용하는 패키지</span>
<span style="color:#a6e22e">library</span>(RColorBrewer)

<span style="color:#75715e"># Dark2 색상 목록에서 8개 색상 추출</span>
pal <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">brewer.pal</span>(<span style="color:#ae81ff">8</span>,<span style="color:#e6db74">&#34;Dark2&#34;</span>)

<span style="color:#75715e"># wordcloud()는 함수를 실행할 때마다 난수를 이용해</span>
<span style="color:#75715e"># 매번 다른 모양의 워드 클라우드를 만들어 낸다.</span>
<span style="color:#75715e"># 항상 동일한 워드 클라우드가 생성되도록</span>
<span style="color:#75715e"># wordcloud()를 실행하기 전에 set.seed()로 난수를 고정한다.</span>
<span style="color:#a6e22e">set.seed</span>(<span style="color:#ae81ff">1234</span>)


<span style="color:#75715e"># 워드 클라우드 만들기</span>

<span style="color:#a6e22e">wordcloud</span>(words <span style="color:#f92672">=</span> df_word<span style="color:#f92672">$</span>word,  <span style="color:#75715e"># 단어</span>
          freq <span style="color:#f92672">=</span> df_word<span style="color:#f92672">$</span>freq,   <span style="color:#75715e"># 빈도</span>
          min.freq <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>,          <span style="color:#75715e"># 최소 단어 빈도</span>
          max.words <span style="color:#f92672">=</span> <span style="color:#ae81ff">200</span>        <span style="color:#75715e"># 표현 단어 수</span>
          random.order <span style="color:#f92672">=</span> F,      <span style="color:#75715e"># 고빈도 단어 중앙 배치</span>
          rot.per <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>,           <span style="color:#75715e"># 회전 단어 비율</span>
          scale <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">0.3</span>),     <span style="color:#75715e"># 단어 크기 범위</span>
          colors <span style="color:#f92672">=</span> pal)          <span style="color:#75715e"># 색상 목록</span>

<span style="color:#75715e"># 출력된 워드 클라우드는 많이 사용된 다어일수록 글자가 크고</span>
<span style="color:#75715e"># 가운데에 배치되며, 덜 사용된 단어일수록 글자가 작고</span>
<span style="color:#75715e"># 바깥에 배치되는 형태로 구성되어 있다.</span>



<span style="color:#75715e"># 단어 색상 바꾸기</span>


<span style="color:#75715e"># 단어 색상 목록을 이용하면 워드 클라우드의 단어 색을 바꿀 수 있다.</span>

pal <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">brewer.pal</span>(<span style="color:#ae81ff">9</span>,<span style="color:#e6db74">&#34;Blues&#34;</span>)[5<span style="color:#f92672">:</span><span style="color:#ae81ff">9</span>] <span style="color:#75715e"># 색상 목록 생성</span>
<span style="color:#a6e22e">set.seed</span>(<span style="color:#ae81ff">1234</span>)                    <span style="color:#75715e"># 난수 고정</span>

<span style="color:#a6e22e">wordcloud</span>(words <span style="color:#f92672">=</span> df_word<span style="color:#f92672">$</span>word,  <span style="color:#75715e"># 단어</span>
          freq <span style="color:#f92672">=</span> df_word<span style="color:#f92672">$</span>freq,   <span style="color:#75715e"># 빈도</span>
          min.freq <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>,          <span style="color:#75715e"># 최소 단어 빈도</span>
          max.words <span style="color:#f92672">=</span> <span style="color:#ae81ff">200</span>        <span style="color:#75715e"># 표현 단어 수</span>
          random.order <span style="color:#f92672">=</span> F,      <span style="color:#75715e"># 고빈도 단어 중앙 배치</span>
          rot.per <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>,           <span style="color:#75715e"># 회전 단어 비율</span>
          scale <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">0.3</span>),     <span style="color:#75715e"># 단어 크기 범위</span>
          colors <span style="color:#f92672">=</span> pal)          <span style="color:#75715e"># 색상 목록</span>


</code></pre></div>
		</div>
		<footer class="post__footer">
			
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/r/" rel="tag">r</a>
		</li>
	</ul>
</div>
		</footer>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2021 My New Hugo Site.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>